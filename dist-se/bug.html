<!doctype html><meta charset=utf8>

<p>After loading this page (with the window focused), you'll see the cursor blinking between 'a' and 'b', but the selection logged with <code>console.log</code> will claim that the cursor is at the end of the editable element (offset 2 of 2 child nodes).</p>

<div contenteditable=true>a<span>b</span></div>

<script>
  let sel = document.getSelection()
  let div = document.querySelector("div")
  div.focus()
  sel.collapse(div, 2)

  // Wrap the 'a' at the start of 
  let sp = document.createElement("span")
  sp.appendChild(div.firstChild)
  div.insertBefore(sp, div.lastChild)
  console.log(sel.focusNode, sel.focusOffset)
</script>